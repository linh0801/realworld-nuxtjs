{"version":3,"file":"2.js","sources":["webpack:///./api/article.js","webpack:///./pages/article/index.vue?3f62","webpack:///./pages/article/components/articleMeta.vue?eb7b","webpack:///./pages/article/components/articleMeta.vue","webpack:///./pages/article/components/articleMeta.vue?691a","webpack:///./pages/article/components/articleMeta.vue?42ce","webpack:///./pages/article/components/articleComment.vue?6ca1","webpack:///./pages/article/components/articleComment.vue","webpack:///./pages/article/components/articleComment.vue?62e7","webpack:///./pages/article/components/articleComment.vue?aa4e","webpack:///./pages/article/index.vue","webpack:///./pages/article/index.vue?01c6","webpack:///./pages/article/index.vue?e35a"],"sourcesContent":["import { request } from '@/plugins/request'\r\n// 文章公共列表页\r\nexport const getArticles = params => request({\r\n  method: 'get',\r\n  url: '/api/articles',\r\n  params\r\n  \r\n})\r\n// 文章详情\r\nexport const getArticle = slug => request ({\r\n  method: 'get',\r\n  url: `/api/articles/${ slug }`\r\n})\r\n// 获取用户关注的用户发布的文章\r\nexport const getYourFeedArticle = params => request({\r\n  method: 'get',\r\n  url: '/api/articles/feed',\r\n  params,\r\n  \r\n})\r\n//  添加点赞\r\nexport const addFavorite  = slug => request({\r\n  method: 'post',\r\n  url: `/api/articles/${ slug }/favorite`,\r\n  \r\n})\r\n//  取消点赞\r\nexport const deleteFavorite  = slug => request({\r\n  method: 'DELETE',\r\n  url: `/api/articles/${ slug }/favorite`,\r\n  \r\n})\r\n// 关注文章作者\r\nexport const followUser = username => request({\r\n  method: 'post',\r\n  url: `/api/profiles/${ username }/follow`\r\n})\r\n// 取消关注文章作者\r\nexport const unfollowUser = username => request({\r\n  method: 'delete',\r\n  url: `/api/profiles/${ username }/follow`\r\n})\r\n// 根据文章作者获取文章的信息\r\nexport const getProfile = username => request({\r\n  method: 'get',\r\n  url: `/api/profiles/${ username }`\r\n})\r\n// 获取文章评论列表\r\nexport const getArticleComments = slug => request({\r\n  method: 'get',\r\n  url: `/api/articles/${ slug }/comments`\r\n})\r\n// 文章评论\r\nexport const addComponent = params => request({\r\n  method: 'post',\r\n  url: `/api/articles/${ params.slug }/comments`,\r\n  data: params.formData\r\n})\r\n// 删除文章评论\r\nexport const deleteComponent = params => request({\r\n  method: 'delete',\r\n  url: `/api/articles/${ params.slug }/comments/ ${ params.id}`,\r\n})\r\n// 发表文章\r\nexport const createArticle = formData => request({\r\n  method: 'post',\r\n  url: '/api/articles',\r\n  data: formData\r\n})","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-page\"},[_vm._ssrNode(\"<div class=\\\"banner\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container\\\">\",\"</div>\",[_vm._ssrNode(\"<h1>\"+_vm._ssrEscape(_vm._s(_vm.article.title))+\"</h1> \"),_c('article-meta',{attrs:{\"article\":_vm.article}})],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"container page\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row article-content\\\"><div class=\\\"col-md-12\\\">\"+(_vm._s(_vm.article.body))+\"</div></div> <hr> \"),_vm._ssrNode(\"<div class=\\\"article-actions\\\">\",\"</div>\",[_c('article-meta',{attrs:{\"article\":_vm.article}})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-xs-12 col-md-8 offset-md-2\\\">\",\"</div>\",[_c('article-coments',{attrs:{\"article\":_vm.article}})],1)])],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-meta\"},[_c('nuxt-link',{attrs:{\"to\":(\"/profile/\" + (_vm.article.author.username))}},[_c('img',{attrs:{\"src\":_vm.article.author.image}})]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"info\\\">\",\"</div>\",[_c('nuxt-link',{staticClass:\"author\",attrs:{\"to\":(\"/profile/\" + (_vm.article.author.username))}},[_vm._v(\"\\n          \"+_vm._s(_vm.article.author.username)+\"\\n        \")]),_vm._ssrNode(\" <span class=\\\"date\\\">\"+_vm._ssrEscape(_vm._s(_vm._f(\"date\")(_vm.article.createAt,'MMM dd, YYYY')))+\"</span>\")],2),_vm._ssrNode(\" <button class=\\\"btn btn-sm btn-outline-secondary\\\"\"+(_vm._ssrStyle(null,null, { display: (!_vm.following) ? '' : 'none' }))+\"><i class=\\\"ion-plus-round\\\"></i>\"+_vm._ssrEscape(\"\\n         \\n        Follow \"+_vm._s(_vm.article.author.username)+\" \\n        \")+\"</button> <button class=\\\"btn btn-sm  btn-secondary\\\"\"+(_vm._ssrStyle(null,null, { display: (_vm.following) ? '' : 'none' }))+\"><i class=\\\"ion-plus-round\\\"></i>\"+_vm._ssrEscape(\"\\n             \\n            unfollow \"+_vm._s(_vm.article.author.username)+\" \\n      \")+\"</button>\\n            \\n      <button\"+(_vm._ssrClass(\"btn btn-sm btn-outline-primary\",{'btn-primary': _vm.isFavorite,\n                  'active': _vm.isFavorite,\n                 'btn-outline-primary': _vm.isFavorite}))+\"><i class=\\\"ion-heart\\\"></i>\\n         \\n        <span\"+(_vm._ssrStyle(null,null, { display: (!_vm.isFavorite) ? '' : 'none' }))+\">Favorite Post </span> <span\"+(_vm._ssrStyle(null,null, { display: (_vm.isFavorite) ? '' : 'none' }))+\">Unfavorite Post </span> <span class=\\\"counter\\\">\"+_vm._ssrEscape(\"(\"+_vm._s(_vm.favoritesCount || _vm.article.favoritesCount)+\")\")+\"</span></button>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { followUser, unfollowUser, getProfile, addFavorite, deleteFavorite } from '@/api/article'\r\nimport { mapState, mapMutations } from 'vuex'\r\nexport default {\r\n  name: 'articleMeta',\r\n  props: {\r\n    article: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getProfile()\r\n  },\r\n  computed : {\r\n    ...mapState(['following', 'favorited', 'favoritesCount']),\r\n    isFavorite () {\r\n      return this.favorited || this.article.favorited\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(['setFollowing', 'setFavoritesCount', 'setFavorite']),\r\n    async getProfile () {\r\n      const { data } = await getProfile(this.article.author.username)\r\n      this.setFollowing(data.profile.following)\r\n    },\r\n    async followUser () {\r\n      const { data } = await followUser(this.article.author.username)\r\n      // this.following = data.profile.following\r\n      this.setFollowing(data.profile.following)\r\n    },\r\n    async unfollowUser () {\r\n      const { data } = await unfollowUser(this.article.author.username)\r\n      // this.following = data.profile.following\r\n      this.setFollowing(data.profile.following)\r\n    },\r\n    async favoritedArticle () {\r\n      let article = null\r\n      if (this.isFavorite ) {\r\n        const { data } = await deleteFavorite(this.article.slug)\r\n        article = data.article\r\n      } else {\r\n        const { data } =  await addFavorite(this.article.slug)\r\n        article = data.article\r\n      }\r\n      this.setFavorite(article.favorited)\r\n      this.setFavoritesCount(article.favoritesCount)\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleMeta.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleMeta.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./articleMeta.vue?vue&type=template&id=ddde770c&\"\nimport script from \"./articleMeta.vue?vue&type=script&lang=js&\"\nexport * from \"./articleMeta.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"407129ce\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<form action class=\\\"card comment-form\\\"><div class=\\\"card-block\\\"><textarea placeholder=\\\"Write a comment...\\\" rows=\\\"3\\\" class=\\\"form-control\\\">\"+_vm._ssrEscape(_vm._s(_vm.formData.comment.body))+\"</textarea></div> <div class=\\\"card-footer\\\"><img\"+(_vm._ssrAttr(\"src\",_vm.user.image))+\" class=\\\"comment-author-img\\\"> <button type=\\\"button\\\" class=\\\"btn btn-sm btn-primary\\\">\\n           Post Comment\\n          </button></div></form> \"),_vm._l((_vm.comments),function(comment){return _vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-block\\\"><p class=\\\"card-text\\\">\"+_vm._ssrEscape(_vm._s(comment.body))+\"</p></div> \"),_vm._ssrNode(\"<div class=\\\"card-footer\\\">\",\"</div>\",[_c('nuxt-link',{staticClass:\"comment-author\",attrs:{\"to\":{\n            name: 'profile',\n            params: {\n              userName: comment.author.username\n            }\n          }}},[_c('img',{staticClass:\"comment-author-img\",attrs:{\"src\":comment.author.image}})]),_vm._ssrNode(\"\\n           \\n          \"),_c('nuxt-link',{staticClass:\"comment-author\",attrs:{\"to\":{\n            name: 'profile',\n            params: {\n              userName: comment.author.username\n            }\n          }}},[_vm._v(\"\\n            \"+_vm._s(comment.author.username)+\"\\n          \")]),_vm._ssrNode(\" <span class=\\\"date-posted\\\">\"+_vm._ssrEscape(_vm._s(_vm._f(\"date\")(comment.createdAt,'MMM DD, YYYY')))+\"</span> \"+((comment.author.username === _vm.user.username)?(\"<button type=\\\"button\\\" class=\\\"btn btn-sm btn-primary\\\" style=\\\"margin-left: 80px;\\\">\\n            Delete Comment\\n          </button>\"):\"<!---->\"))],2)],2)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getArticleComments, addComponent, deleteComponent } from '@/api/article'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: 'articleComents',\r\n  props: {\r\n    article: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      // 评论\r\n      formData: {\r\n        comment: {\r\n          body: ''\r\n        }\r\n      },\r\n      // 评论列表\r\n      comments: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['user'])\r\n  },\r\n  created () {\r\n    this.getComments()\r\n  },\r\n  methods: {\r\n    async getComments () {\r\n      const { data } = await getArticleComments (this.article.slug)\r\n      this.comments = data.comments\r\n    },\r\n    async postComment () {\r\n      \r\n      const params = {}\r\n      Object.assign(params, {slug: this.article.slug, formData: this.formData})\r\n      try {\r\n        const { data } = await addComponent(params)\r\n        this.comments.unshift(data.comment)\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    async deleteComment(id) {\r\n      const params = {\r\n        slug: this.article.slug,\r\n        id\r\n      }\r\n      await deleteComponent( params )\r\n      this.getComments()\r\n    }\r\n\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleComment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleComment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./articleComment.vue?vue&type=template&id=e28e1266&\"\nimport script from \"./articleComment.vue?vue&type=script&lang=js&\"\nexport * from \"./articleComment.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"41d13afb\"\n  \n)\n\nexport default component.exports","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getArticle } from '@/api/article'\r\nimport articleMeta from './components/articleMeta'\r\nimport MarkdownIt from 'markdown-it'\r\nimport articleComents from './components/articleComment'\r\nexport default {\r\n  name: 'articleIndex',\r\n  components: {\r\n    articleMeta,\r\n    articleComents\r\n  },\r\n  async asyncData ({ params }) {\r\n    const { data } = await getArticle(params.slug)\r\n    const { article } = data\r\n    const markdownIt = new MarkdownIt()\r\n    article.body = markdownIt.render(article.body)\r\n    return {\r\n      article\r\n    }\r\n  },\r\n  // 为了利于SEO \r\n  head() {\r\n      return {\r\n        title: `${this.article.title}-RealWorld`,\r\n        meta: [\r\n          {\r\n            hid: 'description',\r\n            name: 'description',\r\n            content: `${this.article.description}`\r\n          }\r\n        ]\r\n      }\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f1789a42&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"1a7c7384\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAMA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AAHA;AACA;AAMA;AACA;AACA;AAFA;AACA;AAKA;AACA;AACA;AAFA;AACA;AAKA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AAHA;;;;;;;;;;;;AChEA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;AACA;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AACA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AA5BA;AAjBA;;AC1CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AADA;AADA;AAKA;AACA;AARA;AAUA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAxBA;AA1BA;;ACzDA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAHA;AAUA;AACA;AA5BA;;ACzCA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}